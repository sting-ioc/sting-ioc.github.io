<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_151) on Tue Mar 24 12:10:31 UTC 2020 -->
<title>Injector (Sting API Documentation)</title>
<meta name="date" content="2020-03-24">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Injector (Sting API Documentation)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../sting/Injectable.html" title="annotation in sting"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../sting/Injector.Input.html" title="annotation in sting"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?sting/Injector.html" target="_top">Frames</a></li>
<li><a href="Injector.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Required&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.optional.element.summary">Optional</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.element.detail">Element</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">sting</div>
<h2 title="Annotation Type Injector" class="title">Annotation Type Injector</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Documented.html?is-external=true" title="class or interface in java.lang.annotation">@Documented</a>
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Retention.html?is-external=true" title="class or interface in java.lang.annotation">@Retention</a>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Retention.html?is-external=true#value--" title="class or interface in java.lang.annotation">value</a>=<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/RetentionPolicy.html?is-external=true#RUNTIME" title="class or interface in java.lang.annotation">RUNTIME</a>)
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Target.html?is-external=true" title="class or interface in java.lang.annotation">@Target</a>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Target.html?is-external=true#value--" title="class or interface in java.lang.annotation">value</a>=<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/ElementType.html?is-external=true#TYPE" title="class or interface in java.lang.annotation">TYPE</a>)
 <a href="../sting/StingProvider.html" title="annotation in sting">@StingProvider</a>(<a href="../sting/StingProvider.html#value--">value</a>="[FlatEnclosingName]Sting_[SimpleName]_Provider")
public @interface <a href="../src-html/sting/Injector.html#line.135">Injector</a></pre>
<div class="block">Annotates an interface for which a dependency-injected implementation is to be generated.
 The implementation builds a component graph from the <a href="../sting/Injector.html#includes--"><code>included</code></a> types and
 exposes the services declared on the injector interface.

 <h2>Component Graph</h2>

 <p>The component graph is created in multiple phases.</p>

 <p>The first phase involves collecting all the types that are declared via the <a href="../sting/Injector.html#includes--"><code>includes()</code></a>
 property and adding a binding (a.k.a. a potential component) for every <a href="../sting/Injectable.html" title="annotation in sting"><code>Injectable</code></a> annotated
 type and a binding for every method in <a href="../sting/Fragment.html" title="annotation in sting"><code>Fragment</code></a> annotated types. </p>

 <p>The second phase involves building a set of actual components created by the injector. Any potential
 binding that is annotated with the <a href="../sting/Eager.html" title="annotation in sting"><code>Eager</code></a> annotation is added to the set of components. The
 <a href="../sting/Injector.html#inputs--"><code>inputs</code></a> are also modelled as eager components. The compiler then examines the services
 declared by the <a href="#service-methods">service methods</a> and attempts to resolve the services into
 components. When a component is added to the list of component, the service dependencies are added to the
 sert of services to resolve. When there is no services left to resolve, the injector is considered
 complete and the compiler terminates this phase.</p>

 <p>The next phase will identify the binding for each component will mark the component as eager and if the
 binding is annotated with the <a href="../sting/Eager.html" title="annotation in sting"><code>Eager</code></a> annotation. All dependencies  of the component that are not
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/function/Supplier.html?is-external=true" title="class or interface in java.util.function"><code>Supplier</code></a> dependencies are marked as eager. This process is recursively applied to dependencies of
 dependencies. At the end of this phase the components are all categorized into those that are eager and
 created when the injector is instantiated and components that are lazy and are created on demand.</p>

 <p>The final phase performs validation and correctness checking. It is during this phase that circular
 dependencies are detected and rejected and that injection requests for injection of singular values with
 multiple bindings that satisfy are detected.</p>

 <h2>Resolving Services</h2>

 <p>A service is resolved into a component by looking at the set of bindings present in the injector.
 If a binding exists that publishes the same type with the same qualifier then the binding is considered
 a match.</p>

 <p>If the binding is marked as optional (i.e. the component is created by a method annotated with
 <a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nullable.html?is-external=true" title="class or interface in javax.annotation"><code>Nullable</code></a> in a type annotated with the <a href="../sting/Fragment.html" title="annotation in sting"><code>Fragment</code></a> annotation) and the service
 is not optional then the compiler generates an error as it is not able to determine statically that the
 service will be available.</p>

 <p>If no matching binding is found then the compiler will attempt to look for a class annotated with
 <a href="../sting/Injectable.html" title="annotation in sting"><code>Injectable</code></a> that has the same name as the type of the service. If found and the type matches the service
 then the class will be added to the set of components created. If not found and the service is not optional then
 the compiler will generate an error.</p>

 <h2>Generated Classname</h2>

 <p>The generated class will have the name of the type annotated with the <code>@Injector</code> annotation
 prepended with <code>Sting_</code>. For example, the class <code>mybiz.MyInjector</code> will produce
 an implementation named <code>mybiz.Sting_MyInjector</code>. Nested classes are also supported but their names
 have the <code>$</code> sign replaced with a <code>_</code>. i.e. The nested class named <code>mybiz.MyOuterClass.MyInjector</code>
 will generate an implementation named <code>mybiz.MyOuterClass_Sting_MyInjector</code></p>

 <a name="service-methods">Service methods</a>
 <h2>Service methods</h2>

 <p>Instance methods defined on the injector allow access to services contained within the injector and
 also define the root services that are used to build the component graph. The instance methods must be
 abstract, have zero parameters, throw no exceptions and return services. The methods can be annotated with
 <a href="../sting/Named.html" title="annotation in sting"><code>Named</code></a> to qualify the service and <a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nullable.html?is-external=true" title="class or interface in javax.annotation"><code>Nullable</code></a> to mark the service as optional.</p>

 <h2>Instantiation</h2>

 <p>A injector is created by invoking the constructor of the generated class. The generated class is package
 access so unless you are only using the injector from within the package it was created, you need to expose
 a method to create the injector. The usual pattern is to define a static method named <code>create</code> on the
 injector interface that creates an instance of the injector.</p>

 <p>Example:</p>

 <pre><code>
  @Injector(includes = {BackendFragment.class, FrontendFragment.class})
 public interface MyInjector {

   public static MyInjector create() {
     return new Sting_MyInjector();
   }

   MyWidget myWidget();
 }

 public class Main {
   public static void main(String[] args) {
     MyInjector injector = MyInjector.create();
     ... injector.myWidget() ...
   }
 }</code></pre>


 <p>The <a href="../sting/Injector.html" title="annotation in sting"><code>Injector</code></a> annotation use the <a href="../sting/Injector.html#inputs--"><code>inputs()</code></a> parameter that declares services that are
 passed into the injector. These services are made available to components within the component graph and
 maybe be qualified and/or marked as optional. Each input service is supplied to the injector as a constructor
 parameter in the generated class.</p>

 <p>Example of using input services:</p>

 <pre><code>
  @Injector( includes = {BackendFragment.class, FrontendFragment.class},
            inputs = {  @Injector.Input( type = MyService.class ),
                        @Injector.Input( qualifier = "hostname", type = String.class ) } )
 interface MyInjector {
   MyWidget myWidget();
 }

 public class Main {
   public static void main(String[] args) {
     MyService service = ...;
     MyInjector injector = new Sting_MyInjector(service, "mybiz.com");
   }
 }</code></pre>

 <h3>Circular Dependencies</h3>

 <p>Circular dependencies within the injector are detected and rejected during the compilation phase.
 Circular dependencies can be broken by passing a <a href="https://docs.oracle.com/javase/8/docs/api/java/util/function/Supplier.html?is-external=true" title="class or interface in java.util.function"><code>Supplier</code></a> dependency. i.e The developer injects
 the type <a href="https://docs.oracle.com/javase/8/docs/api/java/util/function/Supplier.html?is-external=true" title="class or interface in java.util.function"><code>Supplier&lt;OtherType></code></a> instead of <code>OtherType</code> and then calls <a href="https://docs.oracle.com/javase/8/docs/api/java/util/function/Supplier.html?is-external=true#get--" title="class or interface in java.util.function"><code>Supplier.get()</code></a>
 on the supplier when access to the service is needed.</p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== ANNOTATION TYPE OPTIONAL MEMBER SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="annotation.type.optional.element.summary">
<!--   -->
</a>
<h3>Optional Element Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Optional Element Summary table, listing optional elements, and an explanation">
<caption><span>Optional Elements</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Optional Element and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../sting/Feature.html" title="enum in sting">Feature</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../sting/Injector.html#gwt--">gwt</a></span></code>
<div class="block">A flag controlling whether the injector implementation will be optimized for compilation by GWT.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</a>&lt;?&gt;[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../sting/Injector.html#includes--">includes</a></span></code>
<div class="block">A list of types that contribute to the object graph.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../sting/Injector.html#injectable--">injectable</a></span></code>
<div class="block">A flag controlling whether the injector implementation can be added to other injectors.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../sting/Injector.Input.html" title="annotation in sting">Injector.Input</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../sting/Injector.html#inputs--">inputs</a></span></code>
<div class="block">A list of services that must be passed into the injector.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ ANNOTATION TYPE MEMBER DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="annotation.type.element.detail">
<!--   -->
</a>
<h3>Element Detail</h3>
<a name="includes--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>includes</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a> public abstract&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</a>&lt;?&gt;[]&nbsp;<a href="../src-html/sting/Injector.html#line.153">includes</a></pre>
<div class="block">A list of types that contribute to the object graph.
 These types can be <code>@Fragment</code>-annotated interfaces or <a href="../sting/Injectable.html" title="annotation in sting"><code>@Injectable</code></a>-annotated classes.
 The de-duplicated contributions of the <code>@Fragment</code>-annotated interfaces in the
 <code>includes</code>, and of their inclusions recursively, are all contributed
 to the object graph.

 <p>If the annotation processor detects a dependency that is required but not explicitly included in the
 includes list then it will attempt to automatically add the type to the graph if it is annotated with
 <a href="../sting/Injectable.html" title="annotation in sting"><code>@Injectable</code></a>. The current implementation include types
 if they were compiled in the same invocation of the java compiler. In the future the annotation processor
 will load the descriptors from the filesystem.</p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a list of types that contribute to the injectors object graph.</dd>
</dl>
<dl>
<dt>Default:</dt>
<dd>{}</dd>
</dl>
</li>
</ul>
</li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="inputs--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>inputs</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a> public abstract&nbsp;<a href="../sting/Injector.Input.html" title="annotation in sting">Injector.Input</a>[]&nbsp;<a href="../src-html/sting/Injector.html#line.164">inputs</a></pre>
<div class="block">A list of services that must be passed into the injector.
 The annotation processor will generate a constructor with one parameter for every input. Each input
 value MUST specify the type parameter otherwise the annotation processor is unable to determine the
 type of the binding.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a list of services that must be passed into the injector.</dd>
</dl>
<dl>
<dt>Default:</dt>
<dd>{}</dd>
</dl>
</li>
</ul>
</li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="injectable--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>injectable</h4>
<pre>public abstract&nbsp;boolean&nbsp;<a href="../src-html/sting/Injector.html#line.174">injectable</a></pre>
<div class="block">A flag controlling whether the injector implementation can be added to other injectors.
 If set to true then the injector can be included in another injector. The <a href="../sting/Injector.html#inputs--"><code>inputs()</code></a>
 are services that need to be provided while the service methods will define services that this
 injector provides.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true to make the injector able to be included in another injector, false otherwise.</dd>
</dl>
<dl>
<dt>Default:</dt>
<dd>false</dd>
</dl>
</li>
</ul>
</li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="gwt--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>gwt</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation">@Nonnull</a> public abstract&nbsp;<a href="../sting/Feature.html" title="enum in sting">Feature</a>&nbsp;<a href="../src-html/sting/Injector.html#line.188">gwt</a></pre>
<div class="block">A flag controlling whether the injector implementation will be optimized for compilation by GWT.
 This primarily involves the addition of the <code>@DoNotInline</code> annotation to lazy component accessors
 within the injector implementation to avoid inlining a component accessor and all transitive lazy component
 accessors that can increase code-size, compilation time and run time.

 <p>If set to <a href="../sting/Feature.html#AUTODETECT"><code>Feature.AUTODETECT</code></a> then the optimization for gwt will be enabled if the class
 <code>javaemul.internal.annotations.DoNotInline</code> is present on the classpath.</p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true to optimize the injector implementation for transpilation to javascript, false otherwise.</dd>
</dl>
<dl>
<dt>Default:</dt>
<dd>sting.Feature.AUTODETECT</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../sting/Injectable.html" title="annotation in sting"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../sting/Injector.Input.html" title="annotation in sting"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?sting/Injector.html" target="_top">Frames</a></li>
<li><a href="Injector.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Required&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.optional.element.summary">Optional</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.element.detail">Element</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
